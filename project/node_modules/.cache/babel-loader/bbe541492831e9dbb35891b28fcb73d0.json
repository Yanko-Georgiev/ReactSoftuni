{"ast":null,"code":"var _jsxFileName = \"/Users/yankogeorgiev/GitHub/ReactSoftuni/project/src/contexts/MovieContext.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport * as movieService from '../services/movieService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MovieContext = /*#__PURE__*/createContext();\n\nconst movieReducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_MOVIES':\n      return action.payload.map(x => ({ ...x,\n        comments: []\n      }));\n\n    case 'ADD_MOVIE':\n      return [...state, action.payload];\n\n    case 'FETCH_MOVIE_DETAILS':\n    case 'EDIT_MOVIE':\n      return state.map(x => x._id === action.movieId ? action.payload : x);\n\n    case 'ADD_COMMENT':\n      return state.map(x => x._id === action.movieId ? { ...x,\n        comments: [...x.comments, action.payload]\n      } : x);\n\n    case 'REMOVE_MOVIE':\n      return state.filter(x => x._id !== action.movieId);\n\n    default:\n      return state;\n  }\n};\n\nexport const MovieProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [movies, dispatch] = useReducer(movieReducer, []);\n  useEffect(() => {\n    movieService.getAll().then(result => {\n      const action = {\n        type: 'ADD_MOVIES',\n        payload: result\n      };\n      dispatch(action);\n    });\n  }, []);\n\n  const selectMovie = movieId => {\n    return movies.find(x => x._id === movieId) || {};\n  };\n\n  const fetchMovieDetails = (movieId, movieDetails) => {\n    dispatch({\n      type: 'FETCH_MOVIE_DETAILS',\n      payload: movieDetails,\n      movieId\n    });\n  };\n\n  const addComment = (movieId, comment) => {\n    dispatch({\n      type: 'ADD_COMMENT',\n      payload: comment,\n      movieId\n    });\n  };\n\n  const movieAdd = movieData => {\n    dispatch({\n      type: 'ADD_MOVIE',\n      payload: movieData\n    });\n    navigate('/catalog');\n  };\n\n  const movieEdit = (movieId, movieData) => {\n    dispatch({\n      type: 'EDIT_MOVIE',\n      payload: movieData,\n      movieId\n    });\n  };\n\n  const movieRemove = movieId => {\n    dispatch({\n      type: 'REMOVE_MOVIE',\n      movieId\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(MovieContext.Provider, {\n    value: {\n      movies,\n      movieAdd,\n      movieEdit,\n      addComment,\n      fetchMovieDetails,\n      selectMovie,\n      movieRemove\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MovieProvider, \"wwobjA7BLRArHkNqpstW2Xo7UNk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = MovieProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieProvider\");","map":{"version":3,"names":["createContext","useReducer","useEffect","useNavigate","movieService","MovieContext","movieReducer","state","action","type","payload","map","x","comments","_id","movieId","filter","MovieProvider","children","navigate","movies","dispatch","getAll","then","result","selectMovie","find","fetchMovieDetails","movieDetails","addComment","comment","movieAdd","movieData","movieEdit","movieRemove"],"sources":["/Users/yankogeorgiev/GitHub/ReactSoftuni/project/src/contexts/MovieContext.js"],"sourcesContent":["import { createContext, useReducer, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\n\nimport * as movieService from '../services/movieService';\n\nexport const MovieContext = createContext();\n\nconst movieReducer = (state, action) => {\n    switch (action.type) {\n        case 'ADD_MOVIES':\n            return action.payload.map(x => ({ ...x, comments: []}));\n        case 'ADD_MOVIE':\n            return [...state, action.payload];\n        case 'FETCH_MOVIE_DETAILS':\n        case 'EDIT_MOVIE':\n            return state.map(x => x._id === action.movieId ? action.payload : x);\n        case 'ADD_COMMENT':\n            return state.map(x => x._id === action.movieId ? { ...x, comments: [...x.comments, action.payload] } : x);\n        case 'REMOVE_MOVIE':\n            return state.filter(x => x._id !== action.movieId);\n        default:\n            return state;\n    }\n};\n\nexport const MovieProvider = ({\n    children,\n}) => {\n    const navigate = useNavigate();\n    const [movies, dispatch] = useReducer(movieReducer, []);\n\n    useEffect(() => {\n        movieService.getAll()\n            .then(result => {\n                const action = {\n                    type: 'ADD_MOVIES',\n                    payload: result\n                };\n\n                dispatch(action);\n            });\n    }, []);\n\n    const selectMovie = (movieId) => {\n        return movies.find(x => x._id === movieId) || {};\n    };\n\n    const fetchMovieDetails = (movieId, movieDetails) => {\n        dispatch({\n            type: 'FETCH_MOVIE_DETAILS',\n            payload: movieDetails,\n            movieId,\n        })\n    };\n    const addComment = (movieId, comment) => {\n        dispatch({\n            type: 'ADD_COMMENT',\n            payload: comment,\n            movieId\n        });\n    }\n    const movieAdd = (movieData) => {\n        dispatch({\n            type: 'ADD_MOVIE',\n            payload: movieData,\n        })\n\n        navigate('/catalog');\n    };\n\n    const movieEdit = (movieId, movieData) => {\n        dispatch({\n            type: 'EDIT_MOVIE',\n            payload: movieData,\n            movieId,\n        });\n    };\n\n    const movieRemove = (movieId) => {\n        dispatch({\n            type: 'REMOVE_MOVIE',\n            movieId\n        })\n    }\n    return (\n        <MovieContext.Provider value={{\n            movies,\n            movieAdd,\n            movieEdit,\n            addComment,\n            fetchMovieDetails,\n            selectMovie,\n            movieRemove\n        }}>\n            {children}\n        </MovieContext.Provider>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}