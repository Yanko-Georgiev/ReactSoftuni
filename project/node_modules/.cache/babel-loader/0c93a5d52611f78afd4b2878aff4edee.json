{"ast":null,"code":"var _jsxFileName = \"/Users/yankogeorgiev/GitHub/ReactSoftuni/project/src/components/catalog/MovieDetails.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useContext } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { MovieContext } from '../../contexts/MovieContext';\nimport { useAuthContext } from '../../contexts/AuthContext';\nimport * as movieService from '../../services/movieService';\nimport { Footer } from '../Footer';\nimport { Header } from '../Header';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const MovieDetails = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    fetchMovieDetails,\n    selectMovie,\n    movieRemove\n  } = useContext(MovieContext);\n  const {\n    movieId\n  } = useParams();\n  const {\n    user\n  } = useAuthContext();\n  const currentMovie = selectMovie(movieId);\n  useEffect(() => {\n    (async () => {\n      const movieDetails = await movieService.getOne(movieId);\n      console.log(movieDetails);\n      fetchMovieDetails(movieId, { ...movieDetails\n      });\n    })();\n  }, []);\n\n  const movieDeleteHandler = () => {\n    const confirmation = window.confirm('Are you sure you want to delete this game?');\n\n    if (confirmation) {\n      movieService.remove(movieId).then(() => {\n        movieRemove(movieId);\n        navigate('/catalog');\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"details_card\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: currentMovie.img\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: currentMovie.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: currentMovie.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), user._id == currentMovie._ownerId ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.preventDefault();\n            navigate(`/details/${movieId}/edit`);\n          },\n          className: \"btn\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: movieDeleteHandler,\n          className: \"btn\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(MovieDetails, \"8ZpqGKzuZSmhffr0unpZNqTisrY=\", false, function () {\n  return [useNavigate, useParams, useAuthContext];\n});\n\n_c = MovieDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieDetails\");","map":{"version":3,"names":["useEffect","useState","useContext","useParams","Link","useNavigate","MovieContext","useAuthContext","movieService","Footer","Header","MovieDetails","navigate","fetchMovieDetails","selectMovie","movieRemove","movieId","user","currentMovie","movieDetails","getOne","console","log","movieDeleteHandler","confirmation","window","confirm","remove","then","img","title","description","_id","_ownerId","e","preventDefault"],"sources":["/Users/yankogeorgiev/GitHub/ReactSoftuni/project/src/components/catalog/MovieDetails.js"],"sourcesContent":["\nimport { useEffect, useState, useContext } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { MovieContext } from '../../contexts/MovieContext';\nimport { useAuthContext } from '../../contexts/AuthContext';\n\nimport * as movieService from '../../services/movieService';\nimport { Footer } from '../Footer';\nimport { Header } from '../Header';\n\nexport const MovieDetails = () => {\n    const navigate = useNavigate();\n    const { fetchMovieDetails, selectMovie, movieRemove } = useContext(MovieContext);\n    const { movieId } = useParams();\n    const { user } = useAuthContext();\n\n    const currentMovie = selectMovie(movieId);\n\n    useEffect(() => {\n        (async () => {\n            const movieDetails = await movieService.getOne(movieId);\n            console.log(movieDetails);\n        \n\n            fetchMovieDetails(movieId, { ...movieDetails});\n        })();\n    }, [])\n\n\n    const movieDeleteHandler = () => {\n        const confirmation = window.confirm('Are you sure you want to delete this game?');\n\n        if (confirmation) {\n            movieService.remove(movieId)\n                .then(() => {\n                    movieRemove(movieId);\n                    navigate('/catalog');\n                })\n        }\n    }\n    return (\n        <>\n        <Header />\n        <section className='details_card'>\n                <img src={currentMovie.img} />\n                <h1>{currentMovie.title}</h1>\n                <p>{currentMovie.description}</p>\n                {user._id==currentMovie._ownerId\n                ?<>\n                    <button onClick={(e)=>{e.preventDefault();navigate((`/details/${movieId}/edit`))}} className=\"btn\">Edit</button>\n                    <button onClick={movieDeleteHandler} className=\"btn\">Delete</button>\n                </>\n                :null\n                }   \n                \n        </section>\n        <Footer />\n        </>\n    );\n};\n"],"mappings":";;;AACA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,SAASC,SAAT,EAAoBC,IAApB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,SAASC,YAAT,QAA6B,6BAA7B;AACA,SAASC,cAAT,QAA+B,4BAA/B;AAEA,OAAO,KAAKC,YAAZ,MAA8B,6BAA9B;AACA,SAASC,MAAT,QAAuB,WAAvB;AACA,SAASC,MAAT,QAAuB,WAAvB;;;AAEA,OAAO,MAAMC,YAAY,GAAG,MAAM;EAAA;;EAC9B,MAAMC,QAAQ,GAAGP,WAAW,EAA5B;EACA,MAAM;IAAEQ,iBAAF;IAAqBC,WAArB;IAAkCC;EAAlC,IAAkDb,UAAU,CAACI,YAAD,CAAlE;EACA,MAAM;IAAEU;EAAF,IAAcb,SAAS,EAA7B;EACA,MAAM;IAAEc;EAAF,IAAWV,cAAc,EAA/B;EAEA,MAAMW,YAAY,GAAGJ,WAAW,CAACE,OAAD,CAAhC;EAEAhB,SAAS,CAAC,MAAM;IACZ,CAAC,YAAY;MACT,MAAMmB,YAAY,GAAG,MAAMX,YAAY,CAACY,MAAb,CAAoBJ,OAApB,CAA3B;MACAK,OAAO,CAACC,GAAR,CAAYH,YAAZ;MAGAN,iBAAiB,CAACG,OAAD,EAAU,EAAE,GAAGG;MAAL,CAAV,CAAjB;IACH,CAND;EAOH,CARQ,EAQN,EARM,CAAT;;EAWA,MAAMI,kBAAkB,GAAG,MAAM;IAC7B,MAAMC,YAAY,GAAGC,MAAM,CAACC,OAAP,CAAe,4CAAf,CAArB;;IAEA,IAAIF,YAAJ,EAAkB;MACdhB,YAAY,CAACmB,MAAb,CAAoBX,OAApB,EACKY,IADL,CACU,MAAM;QACRb,WAAW,CAACC,OAAD,CAAX;QACAJ,QAAQ,CAAC,UAAD,CAAR;MACH,CAJL;IAKH;EACJ,CAVD;;EAWA,oBACI;IAAA,wBACA,QAAC,MAAD;MAAA;MAAA;MAAA;IAAA,QADA,eAEA;MAAS,SAAS,EAAC,cAAnB;MAAA,wBACQ;QAAK,GAAG,EAAEM,YAAY,CAACW;MAAvB;QAAA;QAAA;QAAA;MAAA,QADR,eAEQ;QAAA,UAAKX,YAAY,CAACY;MAAlB;QAAA;QAAA;QAAA;MAAA,QAFR,eAGQ;QAAA,UAAIZ,YAAY,CAACa;MAAjB;QAAA;QAAA;QAAA;MAAA,QAHR,EAISd,IAAI,CAACe,GAAL,IAAUd,YAAY,CAACe,QAAvB,gBACA;QAAA,wBACG;UAAQ,OAAO,EAAGC,CAAD,IAAK;YAACA,CAAC,CAACC,cAAF;YAAmBvB,QAAQ,CAAG,YAAWI,OAAQ,OAAtB,CAAR;UAAuC,CAAjF;UAAmF,SAAS,EAAC,KAA7F;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADH,eAEG;UAAQ,OAAO,EAAEO,kBAAjB;UAAqC,SAAS,EAAC,KAA/C;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFH;MAAA,gBADA,GAKA,IATT;IAAA;MAAA;MAAA;MAAA;IAAA,QAFA,eAeA,QAAC,MAAD;MAAA;MAAA;MAAA;IAAA,QAfA;EAAA,gBADJ;AAmBH,CAjDM;;GAAMZ,Y;UACQN,W,EAEGF,S,EACHI,c;;;KAJRI,Y"},"metadata":{},"sourceType":"module"}