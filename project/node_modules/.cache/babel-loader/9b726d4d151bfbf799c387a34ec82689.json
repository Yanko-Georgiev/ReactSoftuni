{"ast":null,"code":"var _jsxFileName = \"/Users/yankogeorgiev/GitHub/ReactSoftuni/project/src/components/catalog/MovieDetails.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useContext } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { GameContext } from '../../contexts/GameContext';\nimport * as gameService from '../../services/gameService';\nimport * as commentService from '../../services/commentService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const MovieDetails = () => {\n  _s();\n\n  var _currentGame$comments;\n\n  const navigate = useNavigate();\n  const {\n    addComment,\n    fetchGameDetails,\n    selectGame,\n    gameRemove\n  } = useContext(GameContext);\n  const {\n    gameId\n  } = useParams();\n  const currentGame = selectGame(gameId);\n  useEffect(() => {\n    (async () => {\n      const gameDetails = await gameService.getOne(gameId);\n      console.log(gameDetails);\n      const gameComments = await commentService.getByGameId(gameId);\n      fetchGameDetails(gameId, { ...gameDetails,\n        comments: gameComments.map(x => `${x.user.email}: ${x.text}`)\n      });\n    })();\n  }, []);\n\n  const addCommentHandler = e => {\n    e.preventDefault();\n    const formData = new FormData(e.target);\n    const comment = formData.get('comment');\n    commentService.create(gameId, comment).then(result => {\n      addComment(gameId, comment);\n    });\n  };\n\n  const gameDeleteHandler = () => {\n    const confirmation = window.confirm('Are you sure you want to delete this game?');\n\n    if (confirmation) {\n      gameService.remove(gameId).then(() => {\n        gameRemove(gameId);\n        navigate('/catalog');\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: \"game-details\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Game Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"info-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"game-img\",\n          src: currentGame.imageUrl\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: currentGame.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"levels\",\n          children: [\"MaxLevel: \", currentGame.maxLevel]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"type\",\n          children: currentGame.category\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text\",\n        children: currentGame.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"details-comments\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Comments:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: (_currentGame$comments = currentGame.comments) === null || _currentGame$comments === void 0 ? void 0 : _currentGame$comments.map(x => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"comment\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: x\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 33\n            }, this)\n          }, x, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 21\n        }, this), !currentGame.comments && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"no-comment\",\n          children: \"No comments.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"buttons\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/games/${gameId}/edit`,\n          className: \"button\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: gameDeleteHandler,\n          className: \"button\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"article\", {\n      className: \"create-comment\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Add new comment:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: addCommentHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"comment\",\n          placeholder: \"Comment......\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"btn submit\",\n          type: \"submit\",\n          value: \"Add Comment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MovieDetails, \"n+vAoDeuIw9mFmsUMaiGKx+gZAQ=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = MovieDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieDetails\");","map":{"version":3,"names":["useEffect","useState","useContext","useParams","Link","useNavigate","GameContext","gameService","commentService","MovieDetails","navigate","addComment","fetchGameDetails","selectGame","gameRemove","gameId","currentGame","gameDetails","getOne","console","log","gameComments","getByGameId","comments","map","x","user","email","text","addCommentHandler","e","preventDefault","formData","FormData","target","comment","get","create","then","result","gameDeleteHandler","confirmation","window","confirm","remove","imageUrl","title","maxLevel","category","summary"],"sources":["/Users/yankogeorgiev/GitHub/ReactSoftuni/project/src/components/catalog/MovieDetails.js"],"sourcesContent":["\nimport { useEffect, useState, useContext } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport { GameContext } from '../../contexts/GameContext';\n\nimport * as gameService from '../../services/gameService';\nimport * as commentService from '../../services/commentService';\n\nexport const MovieDetails = () => {\n    const navigate = useNavigate();\n    const { addComment, fetchGameDetails, selectGame, gameRemove } = useContext(GameContext);\n    const { gameId } = useParams();\n\n    const currentGame = selectGame(gameId);\n\n    useEffect(() => {\n        (async () => {\n            const gameDetails = await gameService.getOne(gameId);\n            console.log(gameDetails);\n            const gameComments = await commentService.getByGameId(gameId);\n\n            fetchGameDetails(gameId, { ...gameDetails, comments: gameComments.map(x => `${x.user.email}: ${x.text}`) });\n        })();\n    }, [])\n\n    const addCommentHandler = (e) => {\n        e.preventDefault();\n        const formData = new FormData(e.target);\n\n        const comment = formData.get('comment');\n\n        commentService.create(gameId, comment)\n            .then(result => {\n                addComment(gameId, comment);\n            });\n    };\n\n    const gameDeleteHandler = () => {\n        const confirmation = window.confirm('Are you sure you want to delete this game?');\n\n        if (confirmation) {\n            gameService.remove(gameId)\n                .then(() => {\n                    gameRemove(gameId);\n                    navigate('/catalog');\n                })\n        }\n    }\n\n    return (\n        <section id=\"game-details\">\n            <h1>Game Details</h1>\n            <div className=\"info-section\">\n                <div className=\"game-header\">\n                    <img className=\"game-img\" src={currentGame.imageUrl} />\n                    <h1>{currentGame.title}</h1>\n                    <span className=\"levels\">MaxLevel: {currentGame.maxLevel}</span>\n                    <p className=\"type\">{currentGame.category}</p>\n                </div>\n                <p className=\"text\">\n                    {currentGame.summary}\n                </p>\n\n                <div className=\"details-comments\">\n                    <h2>Comments:</h2>\n                    <ul>\n                        {currentGame.comments?.map(x =>\n                            <li key={x} className=\"comment\">\n                                <p>{x}</p>\n                            </li>\n                        )}\n                    </ul>\n\n                    {!currentGame.comments &&\n                        <p className=\"no-comment\">No comments.</p>\n                    }\n                </div>\n\n                <div className=\"buttons\">\n                    <Link to={`/games/${gameId}/edit`} className=\"button\">\n                        Edit\n                    </Link>\n                    <button onClick={gameDeleteHandler} className=\"button\">\n                        Delete\n                    </button>\n                </div>\n            </div>\n\n            <article className=\"create-comment\">\n                <label>Add new comment:</label>\n                <form className=\"form\" onSubmit={addCommentHandler}>\n                    <textarea\n                        name=\"comment\"\n                        placeholder=\"Comment......\"\n                    />\n\n                    <input\n                        className=\"btn submit\"\n                        type=\"submit\"\n                        value=\"Add Comment\"\n                    />\n                </form>\n            </article>\n        </section>\n    );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}